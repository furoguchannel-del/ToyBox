<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ã‚­ãƒ£ãƒªã‚¢ãƒãƒ³ãƒ‰å¯¾å¿œãƒã‚§ãƒƒã‚«ãƒ¼</title>
    <!-- PWA Settings -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#2563eb">
    <link rel="apple-touch-icon" href="https://cdn-icons-png.flaticon.com/512/552/552408.png">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .carrier-card {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        /* ãƒ©ãƒ™ãƒ«ãŒä»˜ãã‚³ãƒ³ãƒ†ãƒŠã®èª¿æ•´ */
        .chip-container {
            position: relative;
            margin-top: 0.8rem; /* ãƒ©ãƒ™ãƒ«ç”¨ã®éš™é–“ */
            display: inline-flex;
            flex-direction: column;
            align-items: center;
        }
        /* ãƒ—ãƒ©ãƒãƒŠãƒ»ãƒ­ãƒ¼ãƒŸãƒ³ã‚°ãŒä»˜ããƒãƒƒãƒ—ã®ã¿å¹…ã‚’å¾®èª¿æ•´ (2.2rem) */
        .has-long-label {
            min-width: 2.2rem;
        }
        /* ãƒ©ãƒ™ãƒ«ï¼ˆãƒãƒƒã‚¸ï¼‰ã®ã‚¹ã‚¿ã‚¤ãƒ« */
        .badge-label {
            position: absolute;
            top: -0.9rem;
            left: 0;
            font-size: 8px;
            white-space: nowrap;
            transform: scale(0.75);
            transform-origin: left bottom;
            padding: 0 2px;
            border-radius: 2px;
            z-index: 10;
        }
        /* ãƒãƒƒãƒ—è‡ªä½“ã®åŸºæœ¬ã‚¹ã‚¿ã‚¤ãƒ« */
        .band-chip {
            width: 100%;
            text-align: center;
            padding: 1px 4px;
            border-radius: 4px;
            font-size: 10px;
            font-weight: bold;
            border-width: 1px;
            display: block;
        }
    </style>
</head>
<body class="bg-slate-50 min-h-screen p-4 md:p-8 font-sans text-slate-900">
    <div class="max-w-4xl mx-auto">
        <header class="mb-8 text-center">
            <h1 class="text-3xl font-bold text-slate-800 mb-2">ã‚­ãƒ£ãƒªã‚¢ãƒãƒ³ãƒ‰å¯¾å¿œãƒã‚§ãƒƒã‚«ãƒ¼</h1>
            <p class="text-slate-600">ã‚¹ãƒšãƒƒã‚¯è¡¨ã®ãƒãƒ³ãƒ‰è¡¨è¨˜ï¼ˆB1/B3/n77ãªã©ï¼‰ã‚’ãã®ã¾ã¾è²¼ã‚Šä»˜ã‘ã¦ç¢ºèªã§ãã¾ã™</p>
        </header>

        <!-- Input Section -->
        <div class="bg-white rounded-2xl shadow-sm p-6 mb-8 border border-slate-200">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                    <label class="block text-sm font-semibold text-slate-700 mb-2">4G (LTE) ãƒãƒ³ãƒ‰</label>
                    <textarea id="lteInput" rows="3" placeholder="ä¾‹: B1/B3/B18/B19/B28/B41/B42" 
                        class="w-full px-4 py-3 rounded-xl border border-slate-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all resize-none"></textarea>
                    <p class="text-xs text-slate-500 mt-2">B38/B39/B40/B41 ã®ã‚ˆã†ãªå½¢å¼ã‚‚è‡ªå‹•ã§èª­ã¿å–ã‚Šã¾ã™</p>
                </div>
                <div>
                    <label class="block text-sm font-semibold text-slate-700 mb-2">5G (NR) ãƒãƒ³ãƒ‰</label>
                    <textarea id="nrInput" rows="3" placeholder="ä¾‹: n77/n78/n79/n257" 
                        class="w-full px-4 py-3 rounded-xl border border-slate-300 focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none transition-all resize-none"></textarea>
                    <p class="text-xs text-slate-500 mt-2">ãƒŸãƒªæ³¢ï¼ˆn257ï¼‰ã‚‚å«ã‚ã¦åˆ¤å®šå¯èƒ½ã§ã™</p>
                </div>
            </div>
            <div class="mt-6 flex justify-center">
                <button id="checkBtn" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-12 rounded-xl transition-all shadow-lg active:transform active:scale-95">
                    å¯¾å¿œçŠ¶æ³ã‚’åˆ¤å®šã™ã‚‹
                </button>
            </div>
        </div>

        <!-- Results Section -->
        <div id="resultsGrid" class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-12"></div>

        <!-- Information Footer -->
        <div class="bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden">
            <div class="bg-slate-800 px-6 py-3">
                <h3 class="text-white font-bold flex items-center">
                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                    åˆ¤å®šã®ãƒ’ãƒ³ãƒˆï¼ˆå¿…é ˆç´šãƒãƒ³ãƒ‰ä¸€è¦§ï¼‰
                </h3>
            </div>
            <div class="p-6 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 border-b border-slate-100">
                <div>
                    <h4 class="font-bold text-blue-800 text-sm mb-2">â‘  å¿…é ˆç´šãƒ¡ã‚¤ãƒ³ãƒãƒ³ãƒ‰</h4>
                    <p class="text-sm text-slate-600 leading-relaxed">å…¨å›½é€šä¿¡ã«å¿…é ˆã€‚<span class="block mt-1 font-semibold text-emerald-600">å¯¾è±¡: B1, B3</span></p>
                </div>
                <div>
                    <h4 class="font-bold text-blue-800 text-sm mb-2">â‘¡ ãƒ—ãƒ©ãƒãƒŠãƒãƒ³ãƒ‰</h4>
                    <p class="text-sm text-slate-600 leading-relaxed">åœ°ä¸‹ã‚„å»ºç‰©å†…ã§é‡è¦ã€‚<span class="block mt-1 font-semibold text-indigo-600">å¯¾è±¡: B8, B18, B19, B28</span></p>
                </div>
                <div>
                    <h4 class="font-bold text-blue-800 text-sm mb-2">â‘¢ 5G Sub-6</h4>
                    <p class="text-sm text-slate-600 leading-relaxed">ã‚¨ãƒªã‚¢ãŒåºƒã„ä¸»æµã®5Gã€‚<span class="block mt-1 font-semibold text-orange-600">å¯¾è±¡: n77, n78, n79</span></p>
                </div>
                <div>
                    <h4 class="font-bold text-blue-800 text-sm mb-2">â‘£ 5G ãƒŸãƒªæ³¢</h4>
                    <p class="text-sm text-slate-600 leading-relaxed">è¶…é«˜é€Ÿé€šä¿¡ç”¨ã€‚<span class="block mt-1 font-semibold text-rose-600">å¯¾è±¡: n257</span></p>
                </div>
            </div>
            <div class="p-4 bg-slate-50 text-center">
                <p class="text-xs text-slate-500 leading-relaxed">
                    åˆ¤å®šåŸºæº–: å„ç¤¾ã®<b>ã€Œå¿…é ˆãƒ¡ã‚¤ãƒ³ãƒãƒ³ãƒ‰ã€ãŒã™ã¹ã¦</b>ã‚ã‚Šã€ã‹ã¤<b>ã€Œãƒ—ãƒ©ãƒãƒŠã€ãŒ1ã¤ä»¥ä¸Š</b>ã‚ã‚‹å ´åˆã«ã€Œå¿«é©ã€ã¨ãªã‚Šã¾ã™ã€‚<br>
                    <span class="text-[10px] text-slate-400">â€»æ¥½å¤©ãƒ¢ãƒã‚¤ãƒ«ã®B18/B26ã¯KDDIã‹ã‚‰ã®ãƒ­ãƒ¼ãƒŸãƒ³ã‚°æä¾›ãƒãƒ³ãƒ‰ã§ã™ã€‚</span>
                </p>
            </div>
        </div>
    </div>

    <script>
        // PWA Service Worker Registration
        // ã‚¢ãƒ—ãƒªã®æ›´æ–°ã‚’æ­£ã—ãè¡Œã†ãŸã‚ã€ç™»éŒ²å‡¦ç†ã‚’ç¶­æŒã—ã¾ã™
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('./sw.js').catch(err => console.log('SW registration failed:', err));
            });
        }

        const carriers = [
            {
                name: "NTTãƒ‰ã‚³ãƒ¢",
                lte: { main: [1, 3], platinum: [19], sub: [21, 28, 42] },
                nr: { main: [78, 79], sub: [28], mmWave: [257] }
            },
            {
                name: "au (KDDI)",
                lte: { main: [1, 3], platinum: [18, 26], sub: [11, 28, 41, 42] },
                nr: { main: [77, 78], sub: [3, 28, 41], mmWave: [257] }
            },
            {
                name: "ã‚½ãƒ•ãƒˆãƒãƒ³ã‚¯",
                lte: { main: [1, 3], platinum: [8], sub: [11, 28, 41, 42] },
                nr: { main: [77], sub: [3, 28], mmWave: [257] }
            },
            {
                name: "æ¥½å¤©ãƒ¢ãƒã‚¤ãƒ«",
                lte: { main: [3], platinum: [28], sub: [18, 26] },
                nr: { main: [77], sub: [28], mmWave: [257] }
            }
        ];

        function parseFlexibleInput(val) {
            return val.split(/[^0-9]+/)
                      .map(s => parseInt(s, 10))
                      .filter(n => !isNaN(n));
        }

        function renderResults() {
            const userLte = parseFlexibleInput(document.getElementById('lteInput').value);
            const userNr = parseFlexibleInput(document.getElementById('nrInput').value);
            const resultsGrid = document.getElementById('resultsGrid');
            resultsGrid.innerHTML = '';

            carriers.forEach(carrier => {
                const isMainOk = carrier.lte.main.every(b => userLte.includes(b));
                const isPlatOk = carrier.lte.platinum.some(b => userLte.includes(b));
                
                let status = "âš ï¸ éå¯¾å¿œ";
                let statusClass = "text-red-600 bg-red-50 border-red-100";
                let cardClass = "border-slate-200";

                if (isMainOk && isPlatOk) {
                    status = "âœ… å¿«é©ã«ä½¿ç”¨å¯èƒ½";
                    statusClass = "text-green-700 bg-green-50 border-green-200";
                    cardClass = "border-green-500 ring-1 ring-green-500 shadow-md";
                } else if (isMainOk) {
                    status = "ğŸŸ¡ ä¸€éƒ¨å¯¾å¿œï¼ˆãƒ—ãƒ©ãƒãƒŠä¸è¶³ï¼‰";
                    statusClass = "text-amber-700 bg-amber-50 border-amber-200";
                }

                const card = document.createElement('div');
                card.className = `carrier-card bg-white rounded-2xl border p-6 flex flex-col ${cardClass}`;
                
                card.innerHTML = `
                    <div class="flex flex-col mb-4">
                        <h2 class="text-xl font-bold text-slate-800">${carrier.name}</h2>
                        <div class="mt-2 px-3 py-1 rounded-full text-xs font-bold border ${statusClass} inline-block w-fit">
                            ${status}
                        </div>
                    </div>
                    <div class="space-y-6 flex-grow">
                        <div>
                            <div class="flex justify-between items-center mb-1">
                                <h4 class="text-[10px] font-bold uppercase tracking-wider text-slate-400">4G LTE (B)</h4>
                            </div>
                            <div class="flex flex-wrap gap-x-2 gap-y-1">
                                ${renderChips(carrier.lte.main, userLte, 'å¿…é ˆ', 'B', carrier.name)}
                                ${renderChips(carrier.lte.platinum, userLte, 'ãƒ—ãƒ©ãƒãƒŠ', 'B', carrier.name)}
                                ${renderChips(carrier.lte.sub, userLte, 'è£œåŠ©', 'B', carrier.name)}
                            </div>
                        </div>
                        <div>
                            <div class="flex justify-between items-center mb-1">
                                <h4 class="text-[10px] font-bold uppercase tracking-wider text-slate-400">5G NR (n)</h4>
                            </div>
                            <div class="flex flex-wrap gap-x-2 gap-y-1">
                                ${renderChips(carrier.nr.main, userNr, 'ãƒ¡ã‚¤ãƒ³', 'n', carrier.name)}
                                ${renderChips(carrier.nr.sub, userNr, 'è»¢ç”¨', 'n', carrier.name)}
                                ${renderChips(carrier.nr.mmWave, userNr, 'ãƒŸãƒªæ³¢', 'n', carrier.name)}
                            </div>
                        </div>
                    </div>
                `;
                resultsGrid.appendChild(card);
            });
        }

        function renderChips(targetBands, userBands, label, prefix, carrierName) {
            return targetBands.map(b => {
                const isMatch = userBands.includes(b);
                const isPlat = label === 'ãƒ—ãƒ©ãƒãƒŠ';
                const isEssential = label === 'å¿…é ˆ' || label === 'ãƒ¡ã‚¤ãƒ³';
                const isMMW = label === 'ãƒŸãƒªæ³¢';
                const isRoaming = carrierName === "æ¥½å¤©ãƒ¢ãƒã‚¤ãƒ«" && (b === 18 || b === 26);
                
                let badge = "";
                let longLabelClass = "";
                
                if (isRoaming) {
                    badge = `<span class="badge-label bg-amber-100 text-amber-700 border border-amber-200">ãƒ­ãƒ¼ãƒŸãƒ³ã‚°</span>`;
                    longLabelClass = "has-long-label";
                } else if (isEssential) {
                    badge = `<span class="badge-label bg-emerald-100 text-emerald-700 border border-emerald-200">å¿…é ˆ</span>`;
                } else if (isPlat) {
                    badge = `<span class="badge-label bg-indigo-100 text-indigo-700 border border-indigo-200">ãƒ—ãƒ©ãƒãƒŠ</span>`;
                    longLabelClass = "has-long-label";
                } else if (isMMW) {
                    badge = `<span class="badge-label bg-rose-100 text-rose-700 border border-rose-200">ãƒŸãƒªæ³¢</span>`;
                }
                
                let color = isMatch 
                    ? (isPlat ? "bg-indigo-600 border-indigo-700 text-white shadow-sm" : 
                       isEssential ? "bg-emerald-500 border-emerald-600 text-white shadow-sm" : 
                       isMMW ? "bg-rose-500 border-rose-600 text-white shadow-sm" :
                       isRoaming ? "bg-amber-500 border-amber-600 text-white shadow-sm" :
                       "bg-slate-500 border-slate-600 text-white") 
                    : "bg-slate-50 border-slate-200 text-slate-300";
                
                return `
                    <div class="chip-container ${longLabelClass}">
                        ${badge}
                        <span class="band-chip ${color}">${prefix}${b}</span>
                    </div>
                `;
            }).join('');
        }

        document.getElementById('checkBtn').addEventListener('click', renderResults);
        renderResults();
    </script>
</body>
</html>